FROM {{sentient_agent_base_image}}

COPY {{sentient_agent_wheel_file}} {{sent_agent_requirements_file}} /tmp/

ENV PIP_EXTRA_INDEX_URL=""
ENV PIP_TRUSTED_HOST=""

WORKDIR /app

RUN python -m venv venv --system-site-packages &&\
    . /app/venv/bin/activate &&\
    pip install --no-cache-dir -r /tmp/requirements.txt && \
    pip install --no-cache-dir /tmp/{{sentient_agent_wheel_file}} && \
    pip cache purge && \
    rm -rf /root/.cache/pip && \
    rm -rf /tmp/*



RUN echo 'import time\nwhile True:\n    print("Container is running")\n    time.sleep(60)' > /app/keep_alive.py


CMD ["python", "/app/keep_alive.py"]

